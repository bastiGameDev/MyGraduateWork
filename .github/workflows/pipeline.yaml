name: Unity_CSharp_Checkstyle

on:
  push:
    branches:
      - main

jobs:
  checkstyle_project:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v2

      - name: Install Unity Hub
        run: |
          wget -nv https://public-cdn.cloud.unity3d.com/hub/prod/UnityHub.AppImage -O UnityHub.AppImage
          chmod +x UnityHub.AppImage

      - name: Install Unity Editor
        run: |
          ./UnityHub.AppImage install --batchmode --platform linux --version 2020.3.26f1 --components "Unity"

      - name: Check style project
        run: |
          ./UnityHub.AppImage run -- --projectPath ./path_to_your_project -executeMethod BuildScript.RunCodeAnalysis -quit
